extends ../../layouts/default.pug
include ../../mixins/box-head
include ../../mixins/alert.pug


block main
  +alert-success(5000)
  +alert-error(5000)
  .container.my-3 
      .row 
        .col-12 
          +box-head(pageTitle)

      .row 
        .col-12
          if(cartDetail.products.length>0)
            table(class="table table-bordered")
              thead 
                tr 
                    th STT 
                    th Ảnh 
                    th Tên 
                    th Giá
                    th Số lượng 
                    th Tổng tiền 
                    th Hành động
              tbody 
                each item,index in cartDetail.products
                  tr 
                    td #{index +1}
                    td 
                      img(src=item.productInfo.thumbnail alt="Sản phẩm 1" width="80px")
                    td 
                      a(href=`/products/detail/${item.productInfo.slug}`) #{item.productInfo.title}
                    td #{item.productInfo.priceNew} đ
                    td 
                      input(
                        style="width:60px"
                        type="number"
                        value=item.quantity
                        min="1"
                        product-id=item.product_id
                        )
                    td #{item.totalPrice} đ
                    td 
                      a(
                        href=`/cart/delete/${item.product_id}`
                        class="btn btn-danger"
                       ) Xóa
          else 
            h3(class="mb-3") Chưa có sản phẩm trong giỏ hàng!
    
        h3(class="mb-3") Tổng đơn hàng: #{cartDetail.totalPrice} đ
        div(class="text-right mt-3")
          a(href="/checkout" class="btn btn-success") THANH TOÁN   
 
   
      